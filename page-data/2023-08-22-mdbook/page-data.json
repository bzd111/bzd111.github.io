{"componentChunkName":"component---src-templates-blog-post-js","path":"/2023-08-22-mdbook/","result":{"data":{"markdownRemark":{"html":"<!-- vim-markdown-toc GitLab -->\n<ul>\n<li><a href=\"#install\">install</a></li>\n<li><a href=\"#init\">init</a>\n<ul>\n<li><a href=\"#make\">make</a></li>\n</ul>\n</li>\n<li><a href=\"#generate\">generate</a>\n<ul>\n<li><a href=\"#%E4%BF%AE%E6%94%B9booktoml\">修改book.toml</a></li>\n<li><a href=\"#%E7%94%9F%E6%88%90pdf\">生成pdf</a></li>\n</ul>\n</li>\n<li><a href=\"#reference\">reference</a></li>\n</ul>\n<!-- vim-markdown-toc -->\n<h1 id=\"install\" style=\"position:relative;\"><a href=\"#install\" aria-label=\"install permalink\" class=\"toc-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>install</h1>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\"><span class=\"token function\">cargo</span> <span class=\"token function\">install</span> mdbook</code></pre></div>\n<h1 id=\"init\" style=\"position:relative;\"><a href=\"#init\" aria-label=\"init permalink\" class=\"toc-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>init</h1>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">mdbook init my-first-book</code></pre></div>\n<p>会生成如下的文件格式</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">\nmy-first-book\n├── book\n├── book.toml └── src\n    ├── chapter_1.md\n    └── SUMMARY.md\n</code></pre></div>\n<h2 id=\"make\" style=\"position:relative;\"><a href=\"#make\" aria-label=\"make permalink\" class=\"toc-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>make</h2>\n<p>这时候就需要在把需要制作的md文件，按照格式整理好，把所有的章节放到src下面，然后在SUMMARY.md 里加上相应目录的章节</p>\n<p>例如这样</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">❯ tree <span class=\"token parameter variable\">-L</span> <span class=\"token number\">3</span> src\nsrc\n├── ch00_read_this_first.md\n├── ch01_starting_vim.md\n├── ch02_buffers_windows_tabs.md\n├── ch03_searching_files.md\n├── ch04_vim_grammar.md\n├── ch05_moving_in_file.md\n├── ch06_insert_mode.md\n├── ch07_the_dot_command.md\n├── ch08_registers.md\n├── ch09_macros.md\n├── ch10_undo.md\n├── ch11_visual_mode.md\n├── ch12_search_and_substitute.md\n├── ch13_the_global_command.md\n├── ch14_external_commands.md\n├── ch15_command-line_mode.md\n├── ch16_tags.md\n├── ch17_fold.md\n├── ch18_git.md\n├── ch19_compile.md\n├── ch20_views_sessions_viminfo.md\n├── ch21_multiple_file_operations.md\n├── ch22_vimrc.md\n├── ch23_vim_packages.md\n├── ch24_vim_runtime.md\n├── ch25_vimscript_basic_data_types.md\n├── ch26_vimscript_conditionals_and_loops.md\n├── ch27_vimscript_variable_scopes.md\n├── ch28_vimscript_functions.md\n├── ch29_plugin_example_writing-a-titlecase-plugin.md\n└── SUMMARY.md\n❯ <span class=\"token function\">cat</span> src/SUMMARY.md\n<span class=\"token comment\"># Summary</span>\n\n- <span class=\"token punctuation\">[</span>Chapter <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>./ch00_read_this_first.md<span class=\"token punctuation\">)</span>\n- <span class=\"token punctuation\">[</span>Chapter <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>./ch01_starting_vim.md<span class=\"token punctuation\">)</span>\n- <span class=\"token punctuation\">[</span>Chapter <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>./ch02_buffers_windows_tabs.md<span class=\"token punctuation\">)</span>\n- <span class=\"token punctuation\">[</span>Chapter <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>./ch03_searching_files.md<span class=\"token punctuation\">)</span>\n- <span class=\"token punctuation\">[</span>Chapter <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>./ch04_vim_grammar.md<span class=\"token punctuation\">)</span>\n- <span class=\"token punctuation\">[</span>Chapter <span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>./ch05_moving_in_file.md<span class=\"token punctuation\">)</span>\n- <span class=\"token punctuation\">[</span>Chapter <span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>./ch06_insert_mode.md<span class=\"token punctuation\">)</span>\n- <span class=\"token punctuation\">[</span>Chapter <span class=\"token number\">7</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>./ch07_the_dot_command.md<span class=\"token punctuation\">)</span>\n- <span class=\"token punctuation\">[</span>Chapter <span class=\"token number\">8</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>./ch08_registers.md<span class=\"token punctuation\">)</span>\n- <span class=\"token punctuation\">[</span>Chapter <span class=\"token number\">9</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>./ch09_macros.md<span class=\"token punctuation\">)</span>\n- <span class=\"token punctuation\">[</span>Chapter <span class=\"token number\">10</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>./ch10_undo.md<span class=\"token punctuation\">)</span>\n- <span class=\"token punctuation\">[</span>Chapter <span class=\"token number\">11</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>./ch11_visual_mode.md<span class=\"token punctuation\">)</span>\n- <span class=\"token punctuation\">[</span>Chapter <span class=\"token number\">12</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>./ch12_search_and_substitute.md<span class=\"token punctuation\">)</span>\n- <span class=\"token punctuation\">[</span>Chapter <span class=\"token number\">13</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>./ch13_the_global_command.md<span class=\"token punctuation\">)</span>\n- <span class=\"token punctuation\">[</span>Chapter <span class=\"token number\">14</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>./ch14_external_commands.md<span class=\"token punctuation\">)</span>\n- <span class=\"token punctuation\">[</span>Chapter <span class=\"token number\">15</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>./ch15_command-line_mode.md<span class=\"token punctuation\">)</span>\n- <span class=\"token punctuation\">[</span>Chapter <span class=\"token number\">16</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>./ch16_tags.md<span class=\"token punctuation\">)</span>\n- <span class=\"token punctuation\">[</span>Chapter <span class=\"token number\">17</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>./ch17_fold.md<span class=\"token punctuation\">)</span>\n- <span class=\"token punctuation\">[</span>Chapter <span class=\"token number\">18</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>./ch18_git.md<span class=\"token punctuation\">)</span>\n- <span class=\"token punctuation\">[</span>Chapter <span class=\"token number\">19</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>./ch19_compile.md<span class=\"token punctuation\">)</span>\n- <span class=\"token punctuation\">[</span>Chapter <span class=\"token number\">20</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>./ch20_views_sessions_viminfo.md<span class=\"token punctuation\">)</span>\n- <span class=\"token punctuation\">[</span>Chapter <span class=\"token number\">21</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>./ch21_multiple_file_operations.md<span class=\"token punctuation\">)</span>\n- <span class=\"token punctuation\">[</span>Chapter <span class=\"token number\">22</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>./ch22_vimrc.md<span class=\"token punctuation\">)</span>\n- <span class=\"token punctuation\">[</span>Chapter <span class=\"token number\">23</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>./ch23_vim_packages.md<span class=\"token punctuation\">)</span>\n- <span class=\"token punctuation\">[</span>Chapter <span class=\"token number\">24</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>./ch24_vim_runtime.md<span class=\"token punctuation\">)</span>\n- <span class=\"token punctuation\">[</span>Chapter <span class=\"token number\">25</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>./ch25_vimscript_basic_data_types.md<span class=\"token punctuation\">)</span>\n- <span class=\"token punctuation\">[</span>Chapter <span class=\"token number\">26</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>./ch26_vimscript_conditionals_and_loops.md<span class=\"token punctuation\">)</span>\n- <span class=\"token punctuation\">[</span>Chapter <span class=\"token number\">27</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>./ch27_vimscript_variable_scopes.md<span class=\"token punctuation\">)</span>\n- <span class=\"token punctuation\">[</span>Chapter <span class=\"token number\">28</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>./ch28_vimscript_functions.md<span class=\"token punctuation\">)</span>\n- <span class=\"token punctuation\">[</span>Chapter <span class=\"token number\">29</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>./ch29_plugin_example_writing-a-titlecase-plugin.md<span class=\"token punctuation\">)</span>\n</code></pre></div>\n<h1 id=\"generate\" style=\"position:relative;\"><a href=\"#generate\" aria-label=\"generate permalink\" class=\"toc-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>generate</h1>\n<p>最后就可以生成带有outline目录的pdf了</p>\n<p><a href=\"https://hub.docker.com/r/hollowman6/mdbook-pdf\">mdbook-pdf</a>提供的镜像，不支持outline，然后修改了<a href=\"https://github.com/HollowMan6/mdbook-pdf/blob/main/Dockerfile\">Dockerfile</a>，加上了<a href=\"https://pypi.org/project/mdbook-pdf-outline/\">mdbook-pdf-outline</a>的插件</p>\n<h2 id=\"修改booktoml\" style=\"position:relative;\"><a href=\"#%E4%BF%AE%E6%94%B9booktoml\" aria-label=\"修改booktoml permalink\" class=\"toc-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>修改book.toml</h2>\n<p>加上</p>\n<div class=\"gatsby-highlight\" data-language=\"toml\"><pre class=\"language-toml\"><code class=\"language-toml\">\n<span class=\"token punctuation\">[</span><span class=\"token table class-name\">output.pdf</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token table class-name\">output.pdf-outline</span><span class=\"token punctuation\">]</span>\n<span class=\"token key property\">like-wkhtmltopdf</span> <span class=\"token punctuation\">=</span> <span class=\"token boolean\">true</span></code></pre></div>\n<h2 id=\"生成pdf\" style=\"position:relative;\"><a href=\"#%E7%94%9F%E6%88%90pdf\" aria-label=\"生成pdf permalink\" class=\"toc-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>生成pdf</h2>\n<p>是通过挂载的方式，把文件夹挂到容器里执行，最后生成的文件在<code class=\"language-text\">book/pdf-outline/output.pdf</code></p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\"><span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-v</span> /root/my-first-book:/book zidy/mdbook-pdf-outline:latest\n</code></pre></div>\n<h1 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"toc-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>reference</h1>\n<ul>\n<li><a href=\"https://github.com/rust-lang/mdBook\">https://github.com/rust-lang/mdBook</a></li>\n<li><a href=\"https://github.com/HollowMan6/mdbook-pdf\">https://github.com/HollowMan6/mdbook-pdf</a></li>\n</ul>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#install\">install</a></p>\n</li>\n<li>\n<p><a href=\"#init\">init</a></p>\n<ul>\n<li><a href=\"#make\">make</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#generate\">generate</a></p>\n<ul>\n<li><a href=\"#%E4%BF%AE%E6%94%B9booktoml\">修改book.toml</a></li>\n<li><a href=\"#%E7%94%9F%E6%88%90pdf\">生成pdf</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#reference\">reference</a></p>\n</li>\n</ul>","frontmatter":{"title":"mdbook生成pdf","date":"2023-08-22"}}},"pageContext":{"slug":"/2023-08-22-mdbook"}},"staticQueryHashes":["3649515864"],"slicesMap":{}}